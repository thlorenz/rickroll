# syntax=docker/dockerfile:experimental
FROM rust:1.62-slim

RUN rustup target add x86_64-unknown-linux-musl

RUN --mount=type=cache,target=/usr/local/cargo/registry \
    --mount=type=cache,target=/asset-input/target

WORKDIR /asset-input

COPY . .

RUN cargo build --release --target x86_64-unknown-linux-musl
